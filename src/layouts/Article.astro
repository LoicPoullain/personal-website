---
import { formatDate } from "../utils/format-date";
import Container from "./Container.astro";
import Layout from "./Layout.astro";
import SocialLink from "./SocialLink.astro";
import TwitterLogo from "../components/logos/TwitterLogo.astro";
import LinkedInLogo from "../components/logos/LinkedInLogo.astro";
import BlueskyLogo from "../components/logos/BlueskyLogo.astro";
import EmailLogo from "../components/logos/EmailLogo.astro";
import WhatsAppLogo from "../components/logos/WhatsAppLogo.astro";
import TelegramLogo from "../components/logos/TelegramLogo.astro";

interface Props {
  frontmatter: {
    pubDate: string;
    title: string;
    description: string;
  }
}

const { frontmatter } = Astro.props;

const site = Astro.site;
const fullUrl = new URL(Astro.url.pathname, site).href;
---

<Layout title={frontmatter.title} description={frontmatter.description}>
  <Container>
    <time datetime={frontmatter.pubDate} class="max-w-2xl mx-auto block text-sm text-center text-zinc-400 pb-6">{formatDate(frontmatter.pubDate)}</time>
    <article class="max-w-2xl mx-auto prose
    text-zinc-600
      prose-h1:font-bold prose-h1:font-serif prose-h1:tracking-wide prose-h1:text-zinc-800 prose-h1:text-4xl prose-h1:text-center
      prose-code:before:content-none prose-code:after:content-none
      prose-a:underline-offset-4 prose-a:text-inherit prose-a:font-light prose-a:hover:no-underline prose-a:hover:text-yellow-600
      leading-7">
      <slot />
    </article>
    <section class="max-w-2xl mx-auto mt-12 pt-8 border-t border-zinc-200">
      <h3 class="text-lg font-semibold text-zinc-800 mb-4 text-center">Share this article</h3>
      <div class="flex justify-center gap-4">
        <SocialLink 
          href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(frontmatter.title)}&url=${encodeURIComponent(fullUrl)}`}
          name="Share on Twitter"
        >
          <TwitterLogo />
        </SocialLink>
        <SocialLink 
          href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(fullUrl)}`}
          name="Share on LinkedIn"
        >
          <LinkedInLogo />
        </SocialLink>
        <SocialLink 
          href={`https://bsky.app/intent/compose?text=${encodeURIComponent(frontmatter.title + ' ' + fullUrl)}`}
          name="Share on Bluesky"
        >
          <BlueskyLogo />
        </SocialLink>
        <SocialLink 
          href={`mailto:?subject=${encodeURIComponent(frontmatter.title)}&body=${encodeURIComponent(`Check out this article: ${frontmatter.title} - ${fullUrl}`)}`}
          name="Share by Email"
        >
          <EmailLogo />
        </SocialLink>
        <SocialLink 
          href={`https://wa.me/?text=${encodeURIComponent(`${frontmatter.title} - ${fullUrl}`)}`}
          name="Share on WhatsApp"
        >
          <WhatsAppLogo />
        </SocialLink>
        <SocialLink 
          href={`https://t.me/share/url?url=${encodeURIComponent(fullUrl)}&text=${encodeURIComponent(frontmatter.title)}`}
          name="Share on Telegram"
        >
          <TelegramLogo />
        </SocialLink>
      </div>
    </section>
    <!-- <section class="max-w-2xl mx-auto mt-12">
      <div class="bg-zinc-50 rounded-lg p-6 shadow-sm">
        <h3 class="text-lg font-semibold text-zinc-800 mb-2">Stay up to date</h3>
        <p class="text-sm text-zinc-600 mb-4">
          Get notified when I publish something new. You can unsubscribe at any time.
        </p>
        <form action="/thank-you" class="flex flex-col sm:flex-row gap-3">
          <input
            placeholder="Email address"
            aria-label="Email address"
            required
            class="min-w-0 flex-auto appearance-none rounded-md border border-zinc-900/10 bg-white px-3 py-2 shadow shadow-zinc-800/5 placeholder:text-zinc-400 focus:border-yellow-500 focus:ring-4 focus:ring-yellow-500/10 focus:outline-hidden text-sm"
            type="email"
          />
          <button
            class="inline-flex items-center gap-2 justify-center rounded-md py-2 px-4 text-sm outline-offset-2 transition active:transition-none bg-zinc-800 font-semibold text-zinc-100 hover:bg-zinc-700 active:bg-zinc-800 active:text-zinc-100/70 flex-none"
            type="submit"
          >
            Subscribe
          </button>
        </form>
      </div>
    </section> -->
  </Container>
</Layout>